<!--
SPDX-License-Identifier: GPL-2.0-only
Copyright (C) 2023, Input Labs Oy.
-->

<div *ngFor='let button of getButton()'>
    <h2>{{getButtonTitle()}}</h2>

    <div class='block'>
        <div class='subtitle'>Button mode:</div>
        <!-- (change)='selectOption($event.target.value)' -->
        <select class='wide' [(ngModel)]='button.mode'>
            <option value='0'>Normal</option>
            <option value='2'>Hold exclusive</option>
            <option value='3'>Hold exclusive long</option>
            <option value='4'>Hold overlap</option>
            <option value='5'>Hold overlap long</option>
            <option value='6'>Double press overlap</option>
            <option value='1'>Home repeat</option>
        </select>
    </div>

    <div class='block'>
        <div class='subtitle'>On button press:</div>
        <div *ngFor='let action of getActions(0); let i=index'>
            <div
                *ngIf='action!==HID.KEY_NONE || i==0'
                class='action primary'
                [ngClass]="action==HID.KEY_NONE ? 'hidden' : ''"
                (click)='showDialogKeypicker(0)'
                >
                {{HID[action]}}
            </div>
        </div>
        <input
            class='inputtext'
            type='text'
            placeholder='Action name'
            [(ngModel)]='button.hint_primary'
            (change)='save()'
        />
    </div>

    <div class='block' *ngIf='button.mode != 0'>
        <div class='subtitle'>On button hold:</div>
        <div *ngFor='let action of getActions(1); let i=index'>
            <div
                *ngIf='action!==HID.KEY_NONE || i==0'
                class='action secondary'
                [ngClass]="action==HID.KEY_NONE ? 'hidden' : ''"
                (click)='showDialogKeypicker(1)'
                >
                {{HID[action]}}
            </div>
        </div>
        <input
            class='inputtext'
            type='text'
            placeholder='Action name'
            [(ngModel)]='button.hint_secondary'
            (change)='save()'
        />
    </div>

</div>

<dialog id='dialog-keypicker'>
    <div class='keyboard'>
        <div>
            <div class='key wide15' [ngClass]='pickCls(HID.KEY_ESCAPE)' (click)='pick(HID.KEY_ESCAPE)'>ESC</div>
            <div class='key' [ngClass]='pickCls(HID.KEY_F1)' (click)='pick(HID.KEY_F1)'>F1</div>
            <div class='key' [ngClass]='pickCls(HID.KEY_F2)' (click)='pick(HID.KEY_F2)'>F2</div>
            <div class='key' [ngClass]='pickCls(HID.KEY_F3)' (click)='pick(HID.KEY_F3)'>F3</div>
            <div class='key' [ngClass]='pickCls(HID.KEY_F4)' (click)='pick(HID.KEY_F4)'>F4</div>
            <div class='key' [ngClass]='pickCls(HID.KEY_F5)' (click)='pick(HID.KEY_F5)'>F5</div>
            <div class='key' [ngClass]='pickCls(HID.KEY_F6)' (click)='pick(HID.KEY_F6)'>F6</div>
            <div class='key' [ngClass]='pickCls(HID.KEY_F7)' (click)='pick(HID.KEY_F7)'>F7</div>
            <div class='key' [ngClass]='pickCls(HID.KEY_F8)' (click)='pick(HID.KEY_F8)'>F8</div>
            <div class='key' [ngClass]='pickCls(HID.KEY_F9)' (click)='pick(HID.KEY_F9)'>F9</div>
            <div class='key' [ngClass]='pickCls(HID.KEY_F10)' (click)='pick(HID.KEY_F10)'>F10</div>
            <div class='key' [ngClass]='pickCls(HID.KEY_F11)' (click)='pick(HID.KEY_F11)'>F11</div>
            <div class='key' [ngClass]='pickCls(HID.KEY_F12)' (click)='pick(HID.KEY_F12)'>F12</div>
            <div class='key wide20'>US<span class='material'>language</span></div>
            <div class='void'>&nbsp;</div>
            <div class='key' [ngClass]='pickCls(HID.KEY_PRINT_SCREEN)' (click)='pick(HID.KEY_PRINT_SCREEN)'><span class='material'>photo_camera</span></div>
            <div class='key' [ngClass]='pickCls(HID.KEY_SCROLL_LOCK)' (click)='pick(HID.KEY_SCROLL_LOCK)'><span class='material'>sync_lock</span></div>
            <div class='key' [ngClass]='pickCls(HID.KEY_PAUSE)' (click)='pick(HID.KEY_PAUSE)'><span class='material'>pause_circle</span></div>
            <div class="void">&nbsp;</div>
            <div class='key' [ngClass]='pickCls(HID.KEY_MUTE)' (click)='pick(HID.KEY_MUTE)'><span class='material'>volume_off</span></div>
            <div class='key' [ngClass]='pickCls(HID.KEY_VOLUME_DOWN)' (click)='pick(HID.KEY_VOLUME_DOWN)'><span class='material'>volume_down</span></div>
            <div class='key' [ngClass]='pickCls(HID.KEY_VOLUME_UP)' (click)='pick(HID.KEY_VOLUME_UP)'><span class='material'>volume_up</span></div>
            <div class='key' [ngClass]='pickCls(HID.KEY_POWER)' (click)='pick(HID.KEY_POWER)'><span class='material'>power_settings_new</span></div>
        </div>
        <div>
            <div class='key wide15' [ngClass]='pickCls(HID.KEY_BACKQUOTE)' (click)='pick(HID.KEY_BACKQUOTE)'>`</div>
            <div class='key' [ngClass]='pickCls(HID.KEY_1)' (click)='pick(HID.KEY_1)'>1</div>
            <div class='key' [ngClass]='pickCls(HID.KEY_2)' (click)='pick(HID.KEY_2)'>2</div>
            <div class='key' [ngClass]='pickCls(HID.KEY_3)' (click)='pick(HID.KEY_3)'>3</div>
            <div class='key' [ngClass]='pickCls(HID.KEY_4)' (click)='pick(HID.KEY_4)'>4</div>
            <div class='key' [ngClass]='pickCls(HID.KEY_5)' (click)='pick(HID.KEY_5)'>5</div>
            <div class='key' [ngClass]='pickCls(HID.KEY_6)' (click)='pick(HID.KEY_6)'>6</div>
            <div class='key' [ngClass]='pickCls(HID.KEY_7)' (click)='pick(HID.KEY_7)'>7</div>
            <div class='key' [ngClass]='pickCls(HID.KEY_8)' (click)='pick(HID.KEY_8)'>8</div>
            <div class='key' [ngClass]='pickCls(HID.KEY_9)' (click)='pick(HID.KEY_9)'>9</div>
            <div class='key' [ngClass]='pickCls(HID.KEY_0)' (click)='pick(HID.KEY_0)'>0</div>
            <div class='key' [ngClass]='pickCls(HID.KEY_MINUS)' (click)='pick(HID.KEY_MINUS)'>-</div>
            <div class='key' [ngClass]='pickCls(HID.KEY_EQUALS)' (click)='pick(HID.KEY_EQUALS)'>=</div>
            <div class='key wide20' [ngClass]='pickCls(HID.KEY_BACKSPACE)' (click)='pick(HID.KEY_BACKSPACE)'><span class='material'>backspace</span></div>
            <div class="void">&nbsp;</div>
            <div class='key' [ngClass]='pickCls(HID.KEY_INSERT)' (click)='pick(HID.KEY_INSERT)'>INS</div>
            <div class='key' [ngClass]='pickCls(HID.KEY_HOME)' (click)='pick(HID.KEY_HOME)'>HOM</div>
            <div class='key' [ngClass]='pickCls(HID.KEY_PAGE_UP)' (click)='pick(HID.KEY_PAGE_UP)'>PG-</div>
            <div class="void">&nbsp;</div>
            <div class='key' [ngClass]='pickCls(HID.KEY_PAD_NUMLOCK)' (click)='pick(HID.KEY_PAD_NUMLOCK)'>NUM</div>
            <div class='key' [ngClass]='pickCls(HID.KEY_PAD_SLASH)' (click)='pick(HID.KEY_PAD_SLASH)'>/</div>
            <div class='key' [ngClass]='pickCls(HID.KEY_PAD_ASTERISK)' (click)='pick(HID.KEY_PAD_ASTERISK)'>*</div>
            <div class='key' [ngClass]='pickCls(HID.KEY_PAD_MINUS)' (click)='pick(HID.KEY_PAD_MINUS)'>-</div>
        </div>
        <div>
            <div class='key wide20' [ngClass]='pickCls(HID.KEY_TAB)' (click)='pick(HID.KEY_TAB)' >TAB</div>
            <div class='key' [ngClass]='pickCls(HID.KEY_Q)' (click)='pick(HID.KEY_Q)' >Q</div>
            <div class='key' [ngClass]='pickCls(HID.KEY_W)' (click)='pick(HID.KEY_W)' >W</div>
            <div class='key' [ngClass]='pickCls(HID.KEY_E)' (click)='pick(HID.KEY_E)' >E</div>
            <div class='key' [ngClass]='pickCls(HID.KEY_R)' (click)='pick(HID.KEY_R)' >R</div>
            <div class='key' [ngClass]='pickCls(HID.KEY_T)' (click)='pick(HID.KEY_T)' >T</div>
            <div class='key' [ngClass]='pickCls(HID.KEY_Y)' (click)='pick(HID.KEY_Y)' >Y</div>
            <div class='key' [ngClass]='pickCls(HID.KEY_U)' (click)='pick(HID.KEY_U)' >U</div>
            <div class='key' [ngClass]='pickCls(HID.KEY_I)' (click)='pick(HID.KEY_I)' >I</div>
            <div class='key' [ngClass]='pickCls(HID.KEY_O)' (click)='pick(HID.KEY_O)' >O</div>
            <div class='key' [ngClass]='pickCls(HID.KEY_P)' (click)='pick(HID.KEY_P)' >P</div>
            <div class='key' [ngClass]='pickCls(HID.KEY_BRACKET_LEFT)' (click)='pick(HID.KEY_BRACKET_LEFT)' >[</div>
            <div class='key' [ngClass]='pickCls(HID.KEY_BRACKET_RIGHT)' (click)='pick(HID.KEY_BRACKET_RIGHT)' >]</div>
            <div class='key wide15' [ngClass]='pickCls(HID.KEY_BACKSLASH)' (click)='pick(HID.KEY_BACKSLASH)' >\</div>
            <div class="void">&nbsp;</div>
            <div class='key' [ngClass]='pickCls(HID.KEY_DELETE)' (click)='pick(HID.KEY_DELETE)' >DEL</div>
            <div class='key' [ngClass]='pickCls(HID.KEY_END)' (click)='pick(HID.KEY_END)' >END</div>
            <div class='key' [ngClass]='pickCls(HID.KEY_PAGE_DOWN)' (click)='pick(HID.KEY_PAGE_DOWN)' >PG+</div>
            <div class="void">&nbsp;</div>
            <div class='key' [ngClass]='pickCls(HID.KEY_PAD_7)' (click)='pick(HID.KEY_PAD_7)' >7</div>
            <div class='key' [ngClass]='pickCls(HID.KEY_PAD_8)' (click)='pick(HID.KEY_PAD_8)' >8</div>
            <div class='key' [ngClass]='pickCls(HID.KEY_PAD_9)' (click)='pick(HID.KEY_PAD_9)' >9</div>
            <div class='key tallup' [ngClass]='pickCls(HID.KEY_PAD_PLUS)' (click)='pick(HID.KEY_PAD_PLUS)'>&nbsp;</div>
        </div>
        <div>
            <div class='key wide20' [ngClass]='pickCls(HID.KEY_CAPS_LOCK)' (click)='pick(HID.KEY_CAPS_LOCK)'>CAP</div>
            <div class='key' [ngClass]='pickCls(HID.KEY_A)' (click)='pick(HID.KEY_A)'>A</div>
            <div class='key' [ngClass]='pickCls(HID.KEY_S)' (click)='pick(HID.KEY_S)'>S</div>
            <div class='key' [ngClass]='pickCls(HID.KEY_D)' (click)='pick(HID.KEY_D)'>D</div>
            <div class='key' [ngClass]='pickCls(HID.KEY_F)' (click)='pick(HID.KEY_F)'>F</div>
            <div class='key' [ngClass]='pickCls(HID.KEY_G)' (click)='pick(HID.KEY_G)'>G</div>
            <div class='key' [ngClass]='pickCls(HID.KEY_H)' (click)='pick(HID.KEY_H)'>H</div>
            <div class='key' [ngClass]='pickCls(HID.KEY_J)' (click)='pick(HID.KEY_J)'>J</div>
            <div class='key' [ngClass]='pickCls(HID.KEY_K)' (click)='pick(HID.KEY_K)'>K</div>
            <div class='key' [ngClass]='pickCls(HID.KEY_L)' (click)='pick(HID.KEY_L)'>L</div>
            <div class='key' [ngClass]='pickCls(HID.KEY_SEMICOLON)' (click)='pick(HID.KEY_SEMICOLON)'>;</div>
            <div class='key' [ngClass]='pickCls(HID.KEY_QUOTE)' (click)='pick(HID.KEY_QUOTE)'>'</div>
            <div class='key' [ngClass]='pickCls(HID.KEY_ISO_1)' (click)='pick(HID.KEY_ISO_1)'>&nbsp;</div>
            <div class='key wide15' [ngClass]='pickCls(HID.KEY_ENTER)' (click)='pick(HID.KEY_ENTER)'><span class='material'>keyboard_return</span></div>
            <div class="void wide50">&nbsp;</div>
            <div class='key' [ngClass]='pickCls(HID.KEY_PAD_4)' (click)='pick(HID.KEY_PAD_4)'>4</div>
            <div class='key' [ngClass]='pickCls(HID.KEY_PAD_5)' (click)='pick(HID.KEY_PAD_5)'>5</div>
            <div class='key' [ngClass]='pickCls(HID.KEY_PAD_6)' (click)='pick(HID.KEY_PAD_6)'>6</div>
            <div class='key talldown' [ngClass]='pickCls(HID.KEY_PAD_PLUS)' (click)='pick(HID.KEY_PAD_PLUS)'>+</div>
        </div>
        <div>
            <div class='key wide15' [ngClass]='pickCls(HID.KEY_SHIFT_LEFT)' (click)='pick(HID.KEY_SHIFT_LEFT)'><span class='material'>shift</span></div>
            <div class='key' [ngClass]='pickCls(HID.KEY_ISO_2)' (click)='pick(HID.KEY_ISO_2)'>&nbsp;</div>
            <div class='key' [ngClass]='pickCls(HID.KEY_Z)' (click)='pick(HID.KEY_Z)'>Z</div>
            <div class='key' [ngClass]='pickCls(HID.KEY_X)' (click)='pick(HID.KEY_X)'>X</div>
            <div class='key' [ngClass]='pickCls(HID.KEY_C)' (click)='pick(HID.KEY_C)'>C</div>
            <div class='key' [ngClass]='pickCls(HID.KEY_V)' (click)='pick(HID.KEY_V)'>V</div>
            <div class='key' [ngClass]='pickCls(HID.KEY_B)' (click)='pick(HID.KEY_B)'>B</div>
            <div class='key' [ngClass]='pickCls(HID.KEY_N)' (click)='pick(HID.KEY_N)'>N</div>
            <div class='key' [ngClass]='pickCls(HID.KEY_M)' (click)='pick(HID.KEY_M)'>M</div>
            <div class='key' [ngClass]='pickCls(HID.KEY_COMMA)' (click)='pick(HID.KEY_COMMA)'>,</div>
            <div class='key' [ngClass]='pickCls(HID.KEY_PERIOD)' (click)='pick(HID.KEY_PERIOD)'>.</div>
            <div class='key' [ngClass]='pickCls(HID.KEY_SLASH)' (click)='pick(HID.KEY_SLASH)'>/</div>
            <div class='key'>&nbsp;</div>
            <div class='key wide20' [ngClass]='pickCls(HID.KEY_SHIFT_RIGHT)' (click)='pick(HID.KEY_SHIFT_RIGHT)'><span class='material'>shift</span></div>
            <div class="void wide20">&nbsp;</div>
            <div class='key' [ngClass]='pickCls(HID.KEY_UP)' (click)='pick(HID.KEY_UP)'><span class='material'>arrow_upward</span></div>
            <div class="void wide20">&nbsp;</div>
            <div class='key' [ngClass]='pickCls(HID.KEY_PAD_1)' (click)='pick(HID.KEY_PAD_1)'>1</div>
            <div class='key' [ngClass]='pickCls(HID.KEY_PAD_2)' (click)='pick(HID.KEY_PAD_2)'>2</div>
            <div class='key' [ngClass]='pickCls(HID.KEY_PAD_3)' (click)='pick(HID.KEY_PAD_3)'>3</div>
            <div class='key tallup' [ngClass]='pickCls(HID.KEY_PAD_ENTER)' (click)='pick(HID.KEY_PAD_ENTER)'>&nbsp;</div>
        </div>
        <div>
            <div class='key wide15' [ngClass]='pickCls(HID.KEY_CONTROL_LEFT)' (click)='pick(HID.KEY_CONTROL_LEFT)'>CTRL</div>
            <div class='key wide15' [ngClass]='pickCls(HID.KEY_SUPER_LEFT)' (click)='pick(HID.KEY_SUPER_LEFT)'>WIN</div>
            <div class='key wide15' [ngClass]='pickCls(HID.KEY_ALT_LEFT)' (click)='pick(HID.KEY_ALT_LEFT)'>ALT</div>
            <div class='key wide65' [ngClass]='pickCls(HID.KEY_SPACE)' (click)='pick(HID.KEY_SPACE)'><span class='material'>space_bar</span></div>
            <div class='key wide15' [ngClass]='pickCls(HID.KEY_ALT_RIGHT)' (click)='pick(HID.KEY_ALT_RIGHT)'>ALT</div>
            <div class='key wide15' [ngClass]='pickCls(HID.KEY_SUPER_RIGHT)' (click)='pick(HID.KEY_SUPER_RIGHT)'>WIN</div>
            <div class='key wide15' [ngClass]='pickCls(HID.KEY_CONTROL_RIGHT)' (click)='pick(HID.KEY_CONTROL_RIGHT)'>CTRL</div>
            <div class="void wide">&nbsp;</div>
            <div class='key' [ngClass]='pickCls(HID.KEY_LEFT)' (click)='pick(HID.KEY_LEFT)'><span class='material'>arrow_back</span></div>
            <div class='key' [ngClass]='pickCls(HID.KEY_DOWN)' (click)='pick(HID.KEY_DOWN)'><span class='material'>arrow_downward</span></div>
            <div class='key' [ngClass]='pickCls(HID.KEY_RIGHT)' (click)='pick(HID.KEY_RIGHT)'><span class='material'>arrow_forward</span></div>
            <div class="void">&nbsp;</div>
            <div class='key wide20' [ngClass]='pickCls(HID.KEY_PAD_0)' (click)='pick(HID.KEY_PAD_0)'>0</div>
            <div class='key' [ngClass]='pickCls(HID.KEY_PAD_PERIOD)' (click)='pick(HID.KEY_PAD_PERIOD)'>.</div>
            <div class='key talldown' [ngClass]='pickCls(HID.KEY_PAD_ENTER)' (click)='pick(HID.KEY_PAD_ENTER)'><span class='material'>keyboard_return</span></div>
        </div>
    </div>
    <div class='buttons'>
        <button (click)='hideDialogKeypicker()' class='flat'>Close</button>
    </div>
</dialog>
